<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Super Metroid, Map Randomizer, Map Rando, Map, Randomizer">
    <title>Super Metroid Map Rando</title>
    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    </head>
    <body>
    <div class="container">
        <div class="row">
            <div class="col-3">
            </div>
            <div class="col-6 text-center my-2">
                <img src="/static/WebTitle.png" alt="Super Metroid Map Rando" style="width: 75%">
            </div>
            <div class="col-3" align=right>
                <small>Version: <%= version %></small>
            </div>
        </div>
        <form id="main-form" method="POST" enctype="multipart/form-data" action="/randomize" onchange="saveForm(this)"  onsubmit="updateTechSelection()">
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="rom">Input ROM</label>
                <input class="col-sm-10 form-control-file" type="file" id="vanillaRom" name="rom"
                onchange="saveROM(this, 'vanilla')">
            </div>
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="preset">Item placement</label>
                <div class="col-sm-4 btn-group" role="group">
                <% for &name in &item_placement_strategies {
                        let checked = if name == "Open" { "checked" } else { "" };
                     %>
                    <input type="radio"
                        class="btn-check" 
                        name="item_placement_strategy" 
                        id="itemPlacementStrategy<%- name %>"
                        value="<%- name %>"
                        autocomplete="off"
                        onclick="presetChanged()"
                        <%- checked %>>
                    <label class="btn btn-outline-primary" for="itemPlacementStrategy<%- name%>"><%= name %></label>
                <% } %>
                </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Open</strong>: Key items, tanks, and ammo are placed throughout the game in
                roughly a uniformly random way (subject to logic constraints to ensure the game is beatable), 
                which generally allows multiple pathways for progression.</small>                    
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Semiclosed</strong>: Key items are placed sparingly until the final stage of
                item placement, tending to limit the player to a single intended progression sequence for much
                of the game. Energy Tanks and Reserve Tanks are placed in roughly a uniformly random way, as 
                are additional Super and Power Bomb packs after the first pack.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Closed</strong>: Key items, tanks, and ammo (other than Missiles) are placed
                sparingly until the final stage of item placement, tending to limit the player to a single intended
                progression sequence and limited resources for much of the game.</small>
            </div>

            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="preset">Skill assumption</label>
                <div class="col-sm-10 btn-group" role="group">
                <% for (i, p) in preset_data.iter().enumerate() { 
                    let name = &p.preset.name;
                    let name_no_space = &p.preset.name.replace(" ", "");
                    let checked = if i == 0 { "checked" } else { "" }; 
                    %>
                    <input type="radio" class="btn-check" name="preset" value="<%- name %>"
                        id="preset<%- name_no_space%>" autocomplete="off" onclick="presetChanged()" <%- checked %>>
                    <label class="btn btn-outline-primary" for="preset<%- name_no_space %>"><%= name %></label>
                <% } %>
                 </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Note</strong>: Even on the "Easy" difficulty, the seeds can be challenging,
                particularly in the early game. We are still working on improvements to better align the game's
                difficulty with the intended level.</small>
            </div>
            <% include!("skill_assumptions.stpl"); %>

            <div class="form-group row my-2">
                <label class="col-sm-3 col-form-label" for="diabolical_mode">Diabolical mode<br>
                <small>(Key items need harder tech to reach)</small></label>
                <div class="col-sm-2 btn-group my-2" role="group">
                    <input type="radio" class="btn-check" name="diabolical_mode" id="diabolicalModeNo" value="false" checked=true>
                    <label class="btn btn-outline-primary" for="diabolicalModeNo">No</label>
                    <input type="radio" class="btn-check" name="diabolical_mode" id="diabolicalModeYes" value="true">
                    <label class="btn btn-outline-primary" for="diabolicalModeYes">Yes</label>
                </div>
            </div>

            <div class="form-group row my-2">
                <label class="col-sm-3 col-form-label" for="race_mode">Race mode<br>
                <small>(No spoilers)</small></label>
                <div class="col-sm-2 btn-group my-2" role="group">
                    <input type="radio" class="btn-check" name="race_mode" id="raceModeNo" value="No" checked=true>
                    <label class="btn btn-outline-primary" for="raceModeNo">No</label>
                    <input type="radio" class="btn-check" name="race_mode" id="raceModeYes" value="Yes">
                    <label class="btn btn-outline-primary" for="raceModeYes">Yes</label>
                </div>
            </div>
            <div class="form-group row my-2">
                <label for="randomSeed" class="col-sm-3 col-form-label">Random seed</label>
                <div class="col-sm-3">
                <input type="text" class="form-control" name="random_seed" id="randomSeed" value="">
                </div>
            </div>
            <% include!("quality_of_life.stpl"); %>
            <div class="form-group row my-2">
                <div class="col-sm-12">
                    <input type="submit" class="btn btn-primary" value="Randomize Game">
                </div>
            </div>
        </form>
        <small><strong>Note</strong>: This is still in an alpha stage of development, 
        so bugs are expected. If you encounter a problem, 
        feedback is welcome on <a href="https://github.com/blkerby/MapRandomizer/issues">GitHub issues</a>. 
        Also feel free to stop by the <a href="https://discord.gg/Gc99YV2ZcB">Discord</a>: let us know if you
        find a cool seed (or a broken seed), if you have questions or ideas for future development, or if you're 
        streaming the game!</small>
        <div class="row my-2">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">Change log</div>
                    <div class="card-body">
                        <% include!("changelog.stpl"); %>
                    </div>
                </div>
            </div>
        </div>
        <% include!("footnotes.stpl"); %>
    </div>
    <% include!("scripts.stpl"); %>
    </body>
</html>