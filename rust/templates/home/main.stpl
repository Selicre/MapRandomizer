<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Super Metroid, Map Randomizer, Map Rando, Map, Randomizer">
    <title>Super Metroid Map Rando</title>
    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    </head>
    <body>
    <div class="container">
        <div class="row">
            <div class="col-3">
            </div>
            <div class="col-6 text-center my-2">
                <img src="/static/WebTitle.png" alt="Super Metroid Map Rando" style="width: 75%">
            </div>
            <div class="col-3" align=right>
                <small>Version: <%= version %></small>
            </div>
        </div>
        <form id="main-form" method="POST" enctype="multipart/form-data" action="/randomize" onchange="saveForm(this)"  onsubmit="prepareSubmit()">
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="rom">Input ROM</label>
                <input class="col-sm-10 form-control-file" type="file" id="vanillaRom" name="rom"
                onchange="saveROM(this, 'vanilla')">
            </div>
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="preset">Progression style</label>
                <div class="col-sm-4 btn-group" role="group">
                <% for &name in &progression_styles {
                        let checked = if name == "Open" { "checked" } else { "" };
                     %>
                    <input type="radio"
                        class="btn-check" 
                        name="progression_style" 
                        id="progressionStyle<%- name %>"
                        value="<%- name %>"
                        autocomplete="off"
                        <%- checked %>>
                    <label class="btn btn-outline-primary" for="progressionStyle<%- name%>"><%= name %></label>
                <% } %>
                </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Open</strong>: Key items, tanks, and ammo are placed throughout the game at
                a uniform rate, generally allowing multiple pathways for progression.</small>                    
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Semiclosed</strong>: Key items are placed sparingly, tending to limit the player
                to a single intended progression sequence for much of the game. Energy Tanks and Reserve Tanks 
                are placed at roughly a uniform rate, as are additional Super and Power Bomb packs after the
                first pack.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Closed</strong>: Key items, tanks, and ammo (other than Missiles) are placed
                sparingly until the final stage of item placement, tending to limit the player to a single intended
                progression sequence and limited resources for much of the game.</small>
            </div>

            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="preset">Item placement</label>
                <div class="col-sm-3 btn-group" role="group">
                <% for &name in &item_placement_styles {
                        let checked = if name == "Neutral" { "checked" } else { "" };
                     %>
                    <input type="radio"
                        class="btn-check" 
                        name="item_placement_style" 
                        id="itemPlacementStyle<%- name %>"
                        value="<%- name %>"
                        autocomplete="off"
                        <%- checked %>>
                    <label class="btn btn-outline-primary" for="itemPlacementStyle<%- name%>"><%= name %></label>
                <% } %>
                </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Neutral</strong>: Key items are placed in random locations (among the possible locations in a given sphere).</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Forced</strong>: Key items tend to be placed in locations requiring difficult techniques to reach.</small>
            </div>

            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="preset">Skill assumption</label>
                <div class="col-sm-10 btn-group" role="group">
                <% for (i, p) in preset_data.iter().enumerate() { 
                    let name = &p.preset.name;
                    let name_no_space = &p.preset.name.replace(" ", "");
                    let checked = if i == 0 { "checked" } else { "" }; 
                    %>
                    <input type="radio" class="btn-check" name="preset" value="<%- name %>"
                        id="preset<%- name_no_space%>" autocomplete="off" onclick="presetChanged()" <%- checked %>>
                    <label class="btn btn-outline-primary" for="preset<%- name_no_space %>"><%= name %></label>
                <% } %>
                 </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Note</strong>: Even on the "Easy" difficulty, the seeds can be challenging,
                particularly in the early game. We are still working on improvements to better align the game's
                difficulty with the intended level.</small>
            </div>
            <% include!("skill_assumptions.stpl"); %>

            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="item_priority_preset">Item priority</label>
                <div class="col-sm-3 btn-group" role="group">
                    <input type="radio" class="btn-check" name="item_priority_preset" value="Default"
                        id="itemPriorityPresetDefault" autocomplete="off" 
                        onclick="itemPriorityPresetChanged()" checked>
                    <label class="btn btn-outline-primary" for="itemPriorityPresetDefault">Default</label>

                    <input type="radio" class="btn-check" name="item_priority_preset" value="Early Morph"
                        id="itemPriorityPresetEarlyMorph" autocomplete="off" 
                        onclick="itemPriorityPresetChanged()">
                    <label class="btn btn-outline-primary" for="itemPriorityPresetEarlyMorph">Early Morph</label>
                 </div>
            </div>
            <div class="accordion my-2" id="accordionItemPriority">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseItemPriority">
                        Customize item priority
                        </button>
                    </h2>
                    <div id="collapseItemPriority" class="accordion-collapse collapse m-2">
                        <% include!("item_priority.stpl"); %>
                    </div>
                </div>
            </div>

            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="race_mode">Race mode<br>
                <small>(No spoilers)</small></label>
                <div class="col-sm-2 btn-group my-2" role="group">
                    <input type="radio" class="btn-check" name="race_mode" id="raceModeNo" value="No" checked=true>
                    <label class="btn btn-outline-primary" for="raceModeNo">No</label>
                    <input type="radio" class="btn-check" name="race_mode" id="raceModeYes" value="Yes">
                    <label class="btn btn-outline-primary" for="raceModeYes">Yes</label>
                </div>
            </div>
            <div class="form-group row my-2">
                <label for="randomSeed" class="col-sm-2 col-form-label">Random seed</label>
                <div class="col-sm-3">
                <input type="text" class="form-control" name="random_seed" id="randomSeed" value="">
                </div>
            </div>
            <% include!("quality_of_life.stpl"); %>
            <div class="form-group row my-2">
                <div class="col-sm-12">
                    <input type="submit" class="btn btn-primary" value="Randomize Game">
                </div>
            </div>
        </form>
        <small><strong>Note</strong>: This is still in an alpha stage of development, 
        so bugs are expected. If you encounter a problem, 
        feedback is welcome on <a href="https://github.com/blkerby/MapRandomizer/issues">GitHub issues</a>. 
        Also feel free to stop by the <a href="https://discord.gg/Gc99YV2ZcB">Discord</a>: let us know if you
        find a cool seed (or a broken seed), if you have questions or ideas for future development, or if you're 
        streaming the game!</small>
        <div class="row my-2">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">Change log</div>
                    <div class="card-body">
                        <% include!("changelog.stpl"); %>
                    </div>
                </div>
            </div>
        </div>
        <% include!("footnotes.stpl"); %>
    </div>
    <% include!("scripts.stpl"); %>
    </body>
</html>