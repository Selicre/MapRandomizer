<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Super Metroid, Map Randomizer, Map Rando, Map, Randomizer">
    <title>Super Metroid Map Rando</title>
    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    </head>
    <body>
    <div class="container">
        <div class="row">
            <div class="col-3">
            </div>
            <div class="col-6 text-center my-2">
                <img src="/static/WebTitle.png" alt="Super Metroid Map Rando" style="width: 75%">
            </div>
            <div class="col-3" align=right>
                <small>Version: <%= version %></small>
            </div>
        </div>
        <form id="main-form" method="POST" enctype="multipart/form-data" action="/randomize" onchange="saveForm(this)"  onsubmit="prepareSubmit()">
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="rom">Input ROM</label>
                <input class="col-sm-10 form-control-file" type="file" id="vanillaRom" name="rom"
                onchange="saveROM(this, 'vanilla')">
            </div>
        
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="preset">Skill assumption</label>
                <div class="col-sm-10 btn-group" role="group">
                <% for (i, p) in preset_data.iter().enumerate() { 
                    let name = &p.preset.name;
                    let name_no_space = &p.preset.name.replace(" ", "");
                    let checked = if i == 0 { "checked" } else { "" }; 
                    %>
                    <input type="radio" class="btn-check" name="preset" value="<%- name %>"
                        id="preset<%- name_no_space%>" autocomplete="off" onclick="presetChanged()" <%- checked %>>
                    <label class="btn btn-outline-primary" for="preset<%- name_no_space %>"><%= name %></label>
                <% } %>
                 </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Easy</strong>: No tech is required. The early game can still be challenging, as you
                may encounter dangerous enemies and softlock risks.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Medium</strong>: Basic tech may be required: wall jumps, crouch jumps, down grabs, 
                infinite bomb jumps, shinesparks, and navigating heated/water rooms without suits.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Hard</strong>: Common tech may be required, such as mockballs, damage boosts, 
                gate glitching, Gravity jumps, snail climb, Spring Ball jump, and Mochtroid ice clips.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Very Hard</strong>: Obscure or precise tech may be required, such as
                Flatley jumps, grapple jumps, crystal flash stand-ups, evading Metroids, and snail/ice clips 
                assisted by X-ray.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Expert</strong>: Highly precise and/or repetitive tech may be required, such as
                CWJ, tunnel crawls, X-ray climbs, Baby Metroid skip, crystal flash clips, double Spring Ball jumps,
                and pixel-perfect snail/ice clips.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Insane</strong>: Extremely precise, complex, or time-consuming tech may be required,
                such as Taco Tank, Multiviola ice clip, or climbing Main Street with only Ice Beam (no HiJump or Supers).</small>
            </div>
            
            <% include!("skill_assumptions.stpl"); %>

            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="item_progression_preset">Item progression</label>
                <div class="col-sm-5 btn-group" role="group">
                    <input type="radio" class="btn-check" name="item_progression_preset" value="Quick"
                        id="itemProgressionPresetQuick" autocomplete="off" 
                        onclick="itemProgressionPresetChanged()" checked>
                    <label class="btn btn-outline-primary" for="itemProgressionPresetQuick">Quick</label>

                    <input type="radio" class="btn-check" name="item_progression_preset" value="Standard"
                        id="itemProgressionPresetStandard" autocomplete="off" 
                        onclick="itemProgressionPresetChanged()">
                    <label class="btn btn-outline-primary" for="itemProgressionPresetStandard">Standard</label>

                    <input type="radio" class="btn-check" name="item_progression_preset" value="Challenge"
                        id="itemProgressionPresetChallenge" autocomplete="off" 
                        onclick="itemProgressionPresetChanged()">
                    <label class="btn btn-outline-primary" for="itemProgressionPresetChallenge">Challenge</label>
                 </div>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Quick</strong>: Key items, and Morph in particular, are placed earlier. Beams, tanks, and ammo are 
                spread out uniformly. Multiple progression paths are generally possible from relatively early in the game.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Standard</strong>: Key items are spread out roughly uniformly. Beams, tanks, and ammo are 
                spread out uniformly. Multiple progression paths are generally possible by the middle of the game.</small>
            </div>
            <div class="form-group row my-2 mx-2">
                <small><strong>Challenge</strong>: Key items are delayed. A single progression path may 
                be forced until late in the game. Access to beams, tanks, and ammo other than Missiles is often delayed.</small>
            </div>
            <div class="accordion my-2" id="accordionItemPriority">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseItemPriority">
                        Customize item progression
                        </button>
                    </h2>
                    <div id="collapseItemPriority" class="accordion-collapse collapse m-2">
                        <% include!("item_progression.stpl"); %>
                    </div>
                </div>
            </div>
            <% include!("quality_of_life.stpl"); %>
            <div class="form-group row my-2">
                <label class="col-sm-2 col-form-label" for="race_mode">Race mode<br>
                <small>(No spoilers)</small></label>
                <div class="col-sm-2 btn-group my-2" role="group">
                    <input type="radio" class="btn-check" name="race_mode" id="raceModeNo" value="No" checked=true>
                    <label class="btn btn-outline-primary" for="raceModeNo">No</label>
                    <input type="radio" class="btn-check" name="race_mode" id="raceModeYes" value="Yes">
                    <label class="btn btn-outline-primary" for="raceModeYes">Yes</label>
                </div>
            </div>
            <div class="form-group row my-2">
                <label for="randomSeed" class="col-sm-2 col-form-label">Random seed</label>
                <div class="col-sm-3">
                <input type="text" class="form-control" name="random_seed" id="randomSeed" value="">
                </div>
            </div>
            <div class="form-group row my-2">
                <div class="col-sm-12">
                    <input type="submit" class="btn btn-primary" value="Randomize Game">
                </div>
            </div>
        </form>
        <small><strong>Note</strong>: This is still in an alpha stage of development, 
        so bugs are expected. If you encounter a problem, 
        feedback is welcome on <a href="https://github.com/blkerby/MapRandomizer/issues">GitHub issues</a>. 
        Also feel free to stop by the <a href="https://discord.gg/Gc99YV2ZcB">Discord</a>: let us know if you
        find a cool seed (or a broken seed), if you have questions or ideas for future development, or if you're 
        streaming the game!</small>
        <div class="row my-2">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-header">Change log</div>
                    <div class="card-body">
                        <% include!("changelog.stpl"); %>
                    </div>
                </div>
            </div>
        </div>
        <% include!("footnotes.stpl"); %>
    </div>
    <% include!("scripts.stpl"); %>
    </body>
</html>